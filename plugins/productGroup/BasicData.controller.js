/*
 * Copyright (C) 2009-2019 SAP SE or an SAP affiliate company. All rights reserved.
 */
sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","retail/pmr/promotionaloffers/utils/Utils","retail/pmr/promotionaloffers/utils/DateHandler","retail/pmr/promotionaloffers/utils/Formatter","retail/pmr/promotionaloffers/plugins/versions/VersionsSelector","retail/pmr/promotionaloffers/utils/controls/ValueHelpDialogTokenizer"],function(C,J,U,D,F,V,a){"use strict";return C.extend("retail.pmr.promotionaloffers.plugins.productGroup.BasicData",{constructor:function(){this.contentModel=new J();this.dataModel=new J();this.timeModel=new J();},onInit:function(){this.getView().setModel(this.contentModel,"Content");this.getView().setModel(this.dataModel);var r=U.getResourceModel();this.getView().setModel(r,"i18n");this.contentModel.setProperty("/Editable",true);this.oMessageManager=U.getMessageManager();this.i18nModel=U.getResourceModel();},getProductGroupData:function(){var d=jQuery.extend({},this.dataModel.getData());return d;},setNameMode:function(e){this.contentModel.setProperty("/EditableName",e);},setProductGroupData:function(d,I){this.dataModel.setData(d);this.contentModel.setProperty("/ReadOnly",!!d.Display);this.contentModel.setProperty("/EditableName",I);},markErrors:function(){var I=this.getErrorItems();var e=this.buildErrors(I);for(var i=0;i<I.length;i++){U.removeMessagesByPath(I[i].Target);}U.setErrorMessages(this.oMessageManager,e);return e.length;},validateForm:function(){var v=this.markErrors();return v;},getErrorItems:function(){var i=[{Property:"/Name",Target:"/Name",Mandatory:true,Model:this.dataModel,TargetModel:this.dataModel,ErrorTitle:this.i18nModel.getResourceBundle().getText("ErrorMessage.ProductGroupName.Title"),ErrorDescription:this.i18nModel.getResourceBundle().getText("ErrorMessage.ProductGroupName.Description"),ErrorTitleTooLong:this.i18nModel.getResourceBundle().getText("ErrorMessage.GeneralOfferName.TitleTooLong"),ErrorDescriptionTooLong:this.i18nModel.getResourceBundle().getText("ErrorMessage.GeneralOfferName.DescriptionTooLong")},{Property:"/Description",Target:"/Description",Mandatory:false,Model:this.dataModel,TargetModel:this.dataModel,ErrorTitle:this.i18nModel.getResourceBundle().getText("ErrorMessage.GeneralOfferDescription.Title"),ErrorDescription:this.i18nModel.getResourceBundle().getText("ErrorMessage.GeneralOfferDescription.Description")}];return i;},buildErrors:function(b){var v=function(i,c){var E=null;switch(i.Property){case"/Name":if(c.length>40){E={Title:i.ErrorTitleTooLong,Description:i.ErrorDescriptionTooLong};}break;case"/Description":if(c&&c.length>255){E={Title:i.ErrorTitle,Description:i.ErrorDescription};}break;}return E;}.bind(this);var e=[];b.forEach(function(i){var c=i.Model.getProperty(i.Property);var m=i.Mandatory;var E=null;if(m&&!c){E={Title:i.ErrorTitle,Description:i.ErrorDescription};}else{E=v(i,c);}if(E){e.push({message:E.Title,description:E.Description,target:i.Target,type:"Error",processor:i.TargetModel});}}.bind(this));return e;}});});
